<launch>

  <!-- Launch RealSense camera nodes -->
  <include file="$(find realsense_camera)/launch/r200_nodelet_rgbd.launch" />

  <!-- Poor man's URDF -->
  <node name="base2camera" pkg="tf" type="static_transform_publisher" args="0 0 0.09 0 0 0 base_link camera_link 100" />
  <node name="map2base" pkg="tf" type="static_transform_publisher" args="0 0 0 0 0 0 map base_link 100" />

  <!-- Run a single costmap -->
  <node name="my_costmap" pkg="costmap_2d" type="costmap_2d_node" output="screen">
    <rosparam>
 
      costmap: #hardcoded name

        robot_radius: 0.20
        global_frame: /map
        robot_base_frame: base_link
        update_frequency: 1.0
        publish_frequency: 1.0
        static_map: false
        rolling_window: true
        width: 10.0
        height: 10.0
        resolution: 0.05 #x,y resolution

        plugins:
          - {name: obstacles, type: "costmap_2d::VoxelLayer"}

        obstacles:
          max_obstacle_height: 1.0 #for all sensors
          z_resolution: 0.2 #default
          z_voxels: 10 #default
          z_unknown_threshold: 10 #default
          mark_threshold: 0 #default
          publish_voxel_map: true #default is false

          observation_sources: point_cloud_sensor
          point_cloud_sensor:
            sensor_frame: camera_link
            data_type: PointCloud2
            topic: /camera/depth/points
            marking: true
            clearing: true
            max_obstacle_height: 1.0
            min_obstacle_height: 0.0
            obstacle_range: 2.5
            raytrace_range: 2.5

    </rosparam>
  </node>

  <!-- Launch the visualizer. -->
  <node name="rviz" pkg="rviz" type="rviz" />

</launch> 
